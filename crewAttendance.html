<html>
<h3>Crew Attendance</h3>
<body>
  <form>
    <h1>Select Absent</h1>
    <input id="date" type="date">
    <div id="people"></div>
    <button id="submit">Submit</button>
  </form>
</body>

<script>
const state = {
  people: new Set([
    "Grant Arnold",
    "Conor Burke",
    "Vincent Capodilupo",
    "Joseph Cariello",
    "Chris Delisle",
    "Nicholas Fontaine",
    "Will Girard",
    "Liam Jozokos",
    "Jack Kasyjanski",
    "Ethan Kemp",
    "Matthew Kyle",
    "Zach Letendre",
    "Matthew Marks",
    "Rohan Nagaraju",
    "Nikhil Natarajan",
    "Reed Nelson",
    "Andrew Obreiter",
    "Brandon Pepin",
    "Joey Piacentini",
    "Jonnie Redman",
    "Leo Saldanha",
    "Matt Schwartz",
    "Jake Sevigny",
    "Gray Theodore",
    "Aydan Truong",
    "Ethan Vitali",
    "Michael Wilberton"
  ]),
  attendances: {}
}

const setDifference = a => b =>
  new Set( [...a].filter(x => !b.has(x)) )

const addAttendance = date => attendance => {
  return state.attendances[date] = {
    present: attendance,
    absent: setDifference(state.people)(attendance) 
  }
}

document.querySelector("#people").innerHTML =
  ([...state.people]).reduce((people, person) => {
    const id = person.replace(/\s+/g, "")
    return people +=(`
    <div>
      <input type="checkbox" id="${id}"> 
      <label for="${id}">${person}</label> 
    </div>`)
  }, "")

document.querySelector("#submit").onclick = _ =>
  document.querySelector("#date").value
    ? addAttendance(document.querySelector("#date").value)
                   (new Set([/* To Do */]))
    : alert("No date")
</script>
</html>
